---
title: 字符串
categories: 
 - 1-基础知识
typora-copy-images-to: ../images
toc: true
description: 一些字符串相关用法
---

一.字符串操作

字符串查找、截取、替换

https://www.cnblogs.com/komean/p/11109555.html

二.string

1.转换

string转const char*

```
str.c_str();
```

string转char*

```c++
&*str.begin();
```

2.注意

```c++
string str = "abc" + 1;
//输出为：bc，因为”abc”为const char[],加1实际是地址+1，因此输出为bc。
```

[c++ string 拼接 int错误](https://blog.csdn.net/weixin_30618985/article/details/94873499)

3.拼接

```c++
//想要char拼接int
int i = 0;
char c = ++i+'0';
//想要string拼接char
string s = "s";
s += "t";//比较好，不构造新对象
s = s + "t";
//string拼接int
int i =0;
string s = "mthread";
s += to_string(i);
```

几种拼接场景结果对比

1）传入空/非空string拼接10000次

```c++
void stringAdd1(string &s)
{
        for(int i = 0; i < 10000; i++) s += "s";
}
void stringAdd2(string &s)
{
        for(int i = 0; i < 10000; i++) s = s + "s";
}
//对比两种拼接方式的耗时如下图
//非空string为"mthread"
```

![image-20220304090749872](../images/image-20220304090749872.png)

2）传入非空string拼接一次（测试1000次取平均值）

![image-20220304111902516](../images/image-20220304111902516.png)

3）传入非空string拼接两次

![image-20220304092248937](../images/image-20220304092248937.png)

4）传入空string拼接一次（测试1000次取平均值）

![image-20220304111603789](../images/image-20220304111603789.png)

5）传入空string拼接两次

![image-20220304092417567](../images/image-20220304092417567.png)

4.string的+和+=

"+"

> str=str+a;会先将等号右边的两个string对象内容相加，得到一个新的string对象，再把这个新的对象赋给等号左边的string对象。

"+="

> str+=a;直接将等号右边的string对象内容追加到左边的string对象后面。

区别

> 这两者的差别就是，+相比于+=在这个过程中会多产生一个新对象，创建新对象，不仅要时间，新的对象还要占内存，所以+=效率较高。

5.string中"+"的错误情况

5.1若干常量字符串相加

```c++
string s1="abc" +"de";    // 错误
```

字符串没有”+“，只有保证”+“两侧至少有一个是string才可以。

```c++
string s1;
s1=s1+"abc"+"de";  // 正确
s1+="abc"+"de";	   // 错误
```

”+=“要先获得”+="号右侧的内容，于是出现字符串相加。报错。

参考:[C++ string类的+与+=运算符](https://blog.csdn.net/weixin_43222324/article/details/106814953)



string总结参考：[C++中的string类用法简介](https://blog.csdn.net/liitdar/article/details/80498634)
