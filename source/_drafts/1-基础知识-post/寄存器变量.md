---
title: 寄存器变量
categories:
 - 1-基础知识
toc: true
description: 寄存器变量相关内容
---
一.定义

这种变量存放在CPU的寄存器中，使用时，不需要访问内存，而直接从寄存器中读写，从而提高效率。

二.应用

对于循环次数较多的循环控制变量及循环体内反复使用的变量均可定义为寄存器变量，而循环计数是应用寄存器变量的最好候选者。

三.使用条件

(1) 只有局部自动变量和形参才可以定义为寄存器变量。因为寄存器变量属于动态存储方式，凡需要采用静态存储方式的量都不能定义为寄存器变量，包括：模块间全局变量、模块内全局变量、局部static变量;

(2) register是一个"建议"型关键字，意指程序建议该变量放在寄存器中，但最终该变量可能因为条件不满足并未成为寄存器变量，而是被放在了存储器中，但编译器中并不报错(在C++语言中有另一个"建议"型关键字：inline)。

参考：[关键字register的用法](https://zhuanlan.zhihu.com/p/157460900)

（ps：c++编译器如果检查到对寄存器变量使用了取地址符的话register关键字失效。而c语言中会直接报错，参考[Register关键字 ](https://www.cnblogs.com/YeLing0119/p/9746877.html)）

四.注意

> 首先，register**变量必须是能被CPU所接受的类型**。这通常意味着register变量**必须是一个单个的值**，并且**长度应该小于或者等于整型的长度**。不过，有些机器的寄存器也能存放浮点数。
> 其次，因为register变量可能不存放在内存中，所以不能用“&”来获取register变量的地址。

> ​		由于寄存器的数量有限，而且某些寄存器只能接受特定类型的数据（如指针和浮点数），因此真正起作用的register修饰符的数目和类型都依赖于运行程序的机器，而任何多余的register修饰符都将被编译程序所忽略。

> 　　在某些情况下，把变量保存在寄存器中反而会降低程序的运行速度。因为被占用的寄存器不能再用于其它目的；或者变量被使用的次数不够多，不足以装入和存储变量所带来的额外开销。

> 　　早期的C编译程序不会把变量保存在寄存器中，除非你命令它这样做，这时register修饰符是C语言的一种很有价值的补充。然而，随着编译程序设计技术的进步，在决定那些变量应该被存到寄存器中时，现在的C编译环境能比程序员做出更好的决定。实际上，许多编译程序都会忽略register修饰符，因为尽管它完全合法，但它仅仅**是暗示而不是命令**。

[C语言register关键字—最快的关键字](http://blog.sina.com.cn/s/blog_6a1837e90101128k.html)

```c++
#include <iostream>
#include <time.h>
using namespace std;
void func1();
void func2();
int main()
{
        clock_t startTime,endTime;
        startTime = clock();//计时开始
        func1();
        endTime = clock();//计时结束
        cout << "The func1 run time is: " <<(double)(endTime - startTime) / CLOCKS_PER_SEC << "s" << endl;
        startTime = clock();//计时开始
        func2();
        endTime = clock();//计时结束
        cout << "The func2 run time is: " <<(double)(endTime - startTime) / CLOCKS_PER_SEC << "s" << endl;
        system("pause");
        return 0;
}

void func1()
{
        register int temp, i;
        int p=0;
        for ( i=0; i<=30000; i++ )
                for ( temp=0; temp<=100; temp++ )
                      p++;
}
void func2()
{
        int temp, i;
        int p=0;
        for ( i=0; i<=30000; i++ )
                for ( temp=0; temp<=100; temp++ ) 
                        p++;

}

```

寄存器变量与一般变量区别

> 1.寄存器变量的值直接存放在CPU寄存器中，在使用该变量时，直接从寄存器中取值参与运算
> 2.一般变量的值在参与运算都是先从内存中获取，然后发送到CPU，经过CPU计算，若要保存该变量的值，在将变量的值发送回内存中
> 3.寄存器变量能够提高程序的执行效率，目前使用的大多数编译器，都能够对代码进行优化，能够将频繁使用的局部变量，自动放在寄存器中

参考：[C++中的寄存器变量](https://jingyan.baidu.com/article/d621e8dae23f316964913f5e.html)

扩展：[C++变量的存储类别（动态存储、静态存储、自动变量、寄存器变量、外部变量）](https://blog.csdn.net/oqqQuZi1234567/article/details/41846305?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1.pc_relevant_default&utm_relevant_index=1)





